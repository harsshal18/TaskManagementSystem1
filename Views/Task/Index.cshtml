@{
    ViewBag.Title = "Tasks";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2 class="mb-3">Task List</h2>

<div class="mb-3">
    <label>Filter Status:</label>
    <select id="filterStatus" class="form-select d-inline-block w-auto">
        <option value="">All</option>
        <option>New</option>
        <option>In Progress</option>
        <option>Completed</option>
    </select>

    <label class="ms-3">Assigned To:</label>
    <select id="filterAssignedTo" class="form-select d-inline-block w-auto">
        <option value="">All</option>
        <option>Ganesh</option>
        <option>Ram</option>
        <option>Anuj</option>
    </select>

    <button id="btnFilter" class="btn btn-secondary ms-3">Filter</button>
    <button id="btnNew" class="btn btn-primary ms-2">New Task</button>
</div>

<table id="tasksTable" class="table table-bordered table-striped">
    <thead class="table-light">
        <tr>
            <th>TaskId</th>
            <th>Title</th>
            <th>Assigned To</th>
            <th>Due Date</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<!-- ✅ Bootstrap Modal for Add/Edit -->
<div class="modal fade" id="taskModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">
                <h5 class="modal-title">Task</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
                <form id="taskForm">
                    <input type="hidden" id="TaskId" name="TaskId" />

                    <div class="mb-3">
                        <label class="form-label">Title</label>
                        <input type="text" class="form-control" id="Title" name="Title" required />
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Description</label>
                        <textarea class="form-control" id="Description" name="Description"></textarea>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Assigned To</label>
                        <select class="form-select" id="AssignedTo" name="AssignedTo" required>
                            <option value="">--Select--</option>
                            <option>Ganesh</option>
                            <option>Ram</option>
                            <option>Anuj</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Due Date</label>
                        <input type="date" class="form-control" id="DueDate" name="DueDate" required />
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Status</label>
                        <select class="form-select" id="Status" name="Status">
                            <option>New</option>
                            <option>In Progress</option>
                            <option>Completed</option>
                        </select>
                    </div>
                </form>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" form="taskForm" class="btn btn-primary" id="saveTask">Save</button>
            </div>

        </div>
    </div>
</div>

@section Scripts {
    <!-- ✅ Bootstrap + jQuery + DataTables -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css" />
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>

    <!-- ✅ Custom JS -->
    <script src="~/Scripts/task.js"></script>
}
